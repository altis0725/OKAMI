# タスクエージェント割り当てガイド

## 概要

CrewAIでは、タスクからエージェントへの割り当ては、クルーが使用するプロセスタイプに依存します。

## プロセスタイプ

### シーケンシャルプロセス
- **要件**: 各タスクは明示的なエージェント割り当てが必須です
- **動作**: タスクは割り当てられたエージェントによって順番に実行されます
- **例**: `evolution_crew`はシーケンシャルプロセスを使用します

```yaml
# tasks/evolution_task.yaml
evolution_task:
  description: "..."
  expected_output: "..."
  agent: evolution_agent  # シーケンシャルプロセスでは必須
```

### 階層プロセス
- **要件**: タスクのエージェント割り当ては任意です
- **動作**: マネージャーエージェントが動的にタスクを適切なエージェントに委任します
- **例**: `main_crew`は階層プロセスを使用します

```yaml
# tasks/main_task.yaml
main_task:
  description: "..."
  expected_output: "..."
  # agent: 不要 - マネージャーが委任します
```

## 実装の詳細

`crew_factory.py`はこの区別を自動的に処理します：
- シーケンシャルクルーの場合: エージェントをタスクに検証して割り当てます
- 階層クルーの場合: エージェント割り当てを無視します（マネージャーが決定）

## ベストプラクティス

1. **シーケンシャルクルー**: タスクYAMLで常に`agent`フィールドを指定
2. **階層クルー**: マネージャーに決定させるため`agent`フィールドを省略
3. **ドキュメント**: 階層タスクでエージェントを省略する理由をコメント

## 現在の設定

- `main_crew`: 階層プロセス（マネージャーが委任）
- `evolution_crew`: シーケンシャルプロセス（明示的な割り当て）